{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "80720dae_a624694a",
        "filename": "dump/dump_collect.cpp",
        "patchSetId": 1
      },
      "lineNbr": 205,
      "author": {
        "id": 1000089
      },
      "writtenOn": "2023-06-19T11:25:10Z",
      "side": 1,
      "message": "is this functional check intentional, I thought we do not want to check this?",
      "revId": "e1d82e3161b8bd626a26f94a54def815b10dc9a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "840e275a_972105fc",
        "filename": "dump/dump_collect.cpp",
        "patchSetId": 1
      },
      "lineNbr": 205,
      "author": {
        "id": 1000084
      },
      "writtenOn": "2023-06-19T11:32:03Z",
      "side": 1,
      "message": "this is needed, mentioned in the commit message too",
      "parentUuid": "80720dae_a624694a",
      "revId": "e1d82e3161b8bd626a26f94a54def815b10dc9a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "87167848_f7354511",
        "filename": "dump/dump_collect.cpp",
        "patchSetId": 1
      },
      "lineNbr": 205,
      "author": {
        "id": 1000089
      },
      "writtenOn": "2023-06-19T14:31:45Z",
      "side": 1,
      "message": "ok did not read the last statement now good",
      "parentUuid": "840e275a_972105fc",
      "revId": "e1d82e3161b8bd626a26f94a54def815b10dc9a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3bd34b57_8a9f2ec2",
        "filename": "dump/dump_collect.cpp",
        "patchSetId": 1
      },
      "lineNbr": 205,
      "author": {
        "id": 1000086
      },
      "writtenOn": "2023-06-20T03:16:57Z",
      "side": 1,
      "message": "By design BMC/Host never sets Primary processor functional sate to nonfunctional.  Once system booted.  Looks like this is hack to cover some under cover issues in the code.",
      "parentUuid": "840e275a_972105fc",
      "revId": "e1d82e3161b8bd626a26f94a54def815b10dc9a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "26643c1f_880b121b",
        "filename": "dump/dump_collect.cpp",
        "patchSetId": 1
      },
      "lineNbr": 205,
      "author": {
        "id": 1000084
      },
      "writtenOn": "2023-06-20T12:08:17Z",
      "side": 1,
      "message": "No, The host may set functional state of the processor to non-functional after a TI in such cases if the dump is attempted to collect that will be skipped even if the SBE is ready to collect the dump. This is a bug in the code.\n\nIn fact the checking for the functional state was workaround when the SBE state checking was not available, so that needs to be removed.",
      "parentUuid": "3bd34b57_8a9f2ec2",
      "revId": "e1d82e3161b8bd626a26f94a54def815b10dc9a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bc4a355b_68fa878b",
        "filename": "dump/dump_collect.cpp",
        "patchSetId": 1
      },
      "lineNbr": 205,
      "author": {
        "id": 1000086
      },
      "writtenOn": "2023-06-20T14:47:33Z",
      "side": 1,
      "message": "\u003eThe host may set functional state of the processor to non-functional after a TI\nIf this is valid case BMC will fail to boot the step0 , becasue istep runs on the functional processor only.\n\n@dan \nDuring intial development time , based on hostboot team\u0027s request , BMC disbled to set non functional primary processor , to keep IPL moving. Is there design assumption chnage happend now?",
      "parentUuid": "26643c1f_880b121b",
      "revId": "e1d82e3161b8bd626a26f94a54def815b10dc9a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b3061c36_cb8164d4",
        "filename": "dump/dump_collect.cpp",
        "patchSetId": 1
      },
      "lineNbr": 205,
      "author": {
        "id": 1000084
      },
      "writtenOn": "2023-06-20T15:34:54Z",
      "side": 1,
      "message": "If hostboot sets non-functional after the step0, how that is stopping the boot at step0?",
      "parentUuid": "bc4a355b_68fa878b",
      "revId": "e1d82e3161b8bd626a26f94a54def815b10dc9a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2c859fd5_abe07f5a",
        "filename": "dump/dump_collect.cpp",
        "patchSetId": 1
      },
      "lineNbr": 205,
      "author": {
        "id": 1000086
      },
      "writtenOn": "2023-06-20T15:43:28Z",
      "side": 1,
      "message": "TI -\u003e you said hostboot sets to non functional ( primary processor) -\u003e BMC attempt 3 reboot attempts usally in this path. Question is are we expecting fail  next boot here? That is the part i want to clear from your statement.",
      "parentUuid": "b3061c36_cb8164d4",
      "revId": "e1d82e3161b8bd626a26f94a54def815b10dc9a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "12684002_005170fd",
        "filename": "dump/dump_collect.cpp",
        "patchSetId": 1
      },
      "lineNbr": 205,
      "author": {
        "id": 1000084
      },
      "writtenOn": "2023-06-20T15:48:11Z",
      "side": 1,
      "message": "between hostboot TI and reboot there can be a hostboot dump collection",
      "parentUuid": "2c859fd5_abe07f5a",
      "revId": "e1d82e3161b8bd626a26f94a54def815b10dc9a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e3d94960_a030779a",
        "filename": "dump/dump_collect.cpp",
        "patchSetId": 1
      },
      "lineNbr": 205,
      "author": {
        "id": 1000155
      },
      "writtenOn": "2023-06-20T18:24:39Z",
      "side": 1,
      "message": "The specific scenario we saw was that for some reason HB was unable to detect processor 0 (I think it was a vpd issue) and somehow we eventually we TIed.  As part of every shutdown path we push our version of data into the BMC\u0027s devtree.  So in this case we pushed down the fact that proc0 wasn\u0027t installed.  This is obviously a lie because HB was running on it at the time.\n\n\u003e BMC disbled to set non functional primary processor , to keep IPL moving. Is there design assumption chnage happend now?\n\nThe request to make dumps work all the time is orthogonal to the BMC behavior to change the bootproc state or not.  PHAL isn\u0027t able to intercept the state change from Hostboot since it is just a file write, so our (incorrect in this case) state wins and breaks the dump that we need to debug the mistake.",
      "parentUuid": "12684002_005170fd",
      "revId": "e1d82e3161b8bd626a26f94a54def815b10dc9a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "15a5a4ba_8147a995",
        "filename": "dump/dump_collect.cpp",
        "patchSetId": 1
      },
      "lineNbr": 205,
      "author": {
        "id": 1000086
      },
      "writtenOn": "2023-06-21T05:22:52Z",
      "side": 1,
      "message": "Thanks for the update . Are we ok to stop the ipl in this case? In case VPD read failure is intermittent issue and and detected at first boot, system may end-up with quiesce state.",
      "parentUuid": "e3d94960_a030779a",
      "revId": "e1d82e3161b8bd626a26f94a54def815b10dc9a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "abfffd05_a3c5016a",
        "filename": "dump/dump_collect.cpp",
        "patchSetId": 1
      },
      "lineNbr": 205,
      "author": {
        "id": 1000155
      },
      "writtenOn": "2023-06-21T13:57:58Z",
      "side": 1,
      "message": "This is in the dump path, so the ipl should already be stopped.  One the dump is collected, the reboot policy should apply as normal.",
      "parentUuid": "15a5a4ba_8147a995",
      "revId": "e1d82e3161b8bd626a26f94a54def815b10dc9a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c7461a6b_87b98139",
        "filename": "dump/dump_collect.cpp",
        "patchSetId": 1
      },
      "lineNbr": 205,
      "author": {
        "id": 1000086
      },
      "writtenOn": "2023-06-21T14:25:18Z",
      "side": 1,
      "message": "in the BMC reboot path , ( aka reconfigure loopam refering here). BMC is not going to honor the host updated functional state. Looks like IPL is going to fail in this case . basically hwp executes only on functional processor.",
      "parentUuid": "abfffd05_a3c5016a",
      "revId": "e1d82e3161b8bd626a26f94a54def815b10dc9a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8f324d3c_67c0548d",
        "filename": "dump/dump_collect.cpp",
        "patchSetId": 1
      },
      "lineNbr": 205,
      "author": {
        "id": 1000155
      },
      "writtenOn": "2023-06-21T14:34:14Z",
      "side": 1,
      "message": "You can continue to ignore the state for proc0 in all of the current cases.",
      "parentUuid": "c7461a6b_87b98139",
      "revId": "e1d82e3161b8bd626a26f94a54def815b10dc9a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "add021a0_663f5214",
        "filename": "dump/dump_collect.cpp",
        "patchSetId": 1
      },
      "lineNbr": 205,
      "author": {
        "id": 1000086
      },
      "writtenOn": "2023-06-21T17:08:49Z",
      "side": 1,
      "message": "This seems to b breaking the design direction from Host vs BMC . BMC is setting presence based on fsi presence and able to cleanly do harwadre access here. Due to fix host side issues deviating from original design direction seems to be not reasonable here. \nWondering why host is setting primary processor non-functional here .As per design direction agreed initally , both Host/BMC is not going set primary [rocessor non-functional to keep ipl moving. am i missing something here?",
      "parentUuid": "c7461a6b_87b98139",
      "revId": "e1d82e3161b8bd626a26f94a54def815b10dc9a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c1c6d1c5_1735d730",
        "filename": "dump/dump_collect.cpp",
        "patchSetId": 1
      },
      "lineNbr": 205,
      "author": {
        "id": 1000155
      },
      "writtenOn": "2023-06-21T19:12:10Z",
      "side": 1,
      "message": "Hostboot\u0027s state reflects what it sees.  I believe that in the case I saw there was some kind of issue reading the module vpd.  If we can\u0027t read the vpd then we mark the associated part as non-existent.  Hostboot does not have a bunch of special-case code to keep booting if the bootproc isn\u0027t functional since that would be invalid.  Hostboot will kill the boot if we detect a nonfunctional bootproc regardless of the reason.  The BMC on the other hand needs to gather FFDC on whatever parts make sense.",
      "parentUuid": "add021a0_663f5214",
      "revId": "e1d82e3161b8bd626a26f94a54def815b10dc9a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "93e4b731_60cf081d",
        "filename": "dump/dump_collect.cpp",
        "patchSetId": 1
      },
      "lineNbr": 205,
      "author": {
        "id": 1000084
      },
      "writtenOn": "2023-06-21T20:05:25Z",
      "side": 1,
      "message": "I don\u0027t think a hostboot dump will be requested in a reconfig loop path, if a hostboot dump is requested and the proc0 is updated as non-functional then we will end up skipping the hostboot dump collection.\n\nMore than that, since we implemented sbe states, the checking of functional state of the proc may not be necessary.",
      "parentUuid": "c1c6d1c5_1735d730",
      "revId": "e1d82e3161b8bd626a26f94a54def815b10dc9a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bb6f649e_9e13a503",
        "filename": "dump/dump_collect.cpp",
        "patchSetId": 1
      },
      "lineNbr": 205,
      "author": {
        "id": 1000155
      },
      "writtenOn": "2023-06-22T13:48:39Z",
      "side": 1,
      "message": "\u003e the proc0 is updated as non-functional then we will end up skipping the hostboot dump collection\n\nNo.  That is exactly the request I\u0027m making.  I want the dump to be attempted regardless of the state no matter what the scenario is.",
      "parentUuid": "93e4b731_60cf081d",
      "revId": "e1d82e3161b8bd626a26f94a54def815b10dc9a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}